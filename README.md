# 🌟 Star Greenhouse: 100% Survival

一个用于教授小学生百分比概念的互动式数学教育游戏。通过太空温室生存主题，让学生理解百分比作为比例的概念，并培养手动计算能力。

## 📚 项目简介

**Star Greenhouse: 100% Survival** 是一款专为小学生设计的数学教育游戏，采用"纯计算模式"（Pure Calculation Mode）。学生必须通过手动计算来确定需要填充的格子数量，而不是依赖系统自动显示百分比。这种设计帮助学生真正理解百分比的计算原理，而不仅仅是依赖视觉反馈。

### 🎯 教育目标

- **理解百分比概念**：百分比是相对于总量的比例，不是固定数值
- **培养计算能力**：学生必须手动计算目标百分比对应的格子数
- **处理复杂情况**：学习在有废料格子的情况下如何正确计算
- **提高数学思维**：通过游戏化学习，让数学变得有趣且实用

## 🎮 游戏特色

- **纯计算模式**：隐藏实时百分比显示，学生必须手动计算
- **动态网格系统**：不同关卡有不同的总格数（100格、50格、80格），让学生理解百分比是相对于总量的比例
- **废料挑战**：进阶关卡包含废料格子（红色锁定格子），学生必须计算可用空间
- **时间限制**：增加游戏紧张感和挑战性
- **多种交互方式**：
  - 点击单个格子进行选择/取消选择
  - 使用滑杆快速调整填充数量
  - 滑杆与点击双向同步
- **教育性反馈**：失败时提供引导性提示，帮助学生理解错误原因，但不直接给出答案
- **自动关卡进阶**：完成当前关卡后自动进入下一关

## 🚀 快速开始

### 🌐 在线访问（推荐）

**直接访问 GitHub Pages：**
```
https://514ctdawn.github.io/Star-Greenhouse-100-Survival/
```

或者双击 `打开网站.bat` 文件，会自动在浏览器中打开在线版本。

### 💻 本地开发

#### 方法 1：使用启动脚本（最简单）

双击 `start-game.bat` 文件，游戏会自动在浏览器中打开本地开发服务器。

#### 方法 2：手动启动

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

然后在浏览器访问：`http://localhost:5173`

#### 方法 3：构建并预览

```bash
# 构建项目
npm run build

# 预览构建版本
npm run preview
```

访问：`http://localhost:4173`

## 📋 关卡配置

### Level A（基礎關卡）
- **总格数**：100 格（10x10 网格）
- **目标百分比**：40%
- **废料**：0%（无废料格子）
- **时间限制**：60秒
- **教学目标**：理解 1% = 1 格的基本概念
- **计算示例**：100 格 × 40% = 40 格

### Level B（進階關卡）
- **总格数**：50 格（10x5 网格）
- **目标百分比**：40%
- **废料**：10%（5个红色锁定格子）
- **时间限制**：45秒
- **教学目标**：计算总格数，然后减去废料格数
- **计算示例**：50 格 × 40% = 20 格（废料已包含在总格数中）

### Level C（挑戰關卡）
- **总格数**：80 格（10x8 网格）
- **目标百分比**：25%
- **废料**：10%（8个红色锁定格子）
- **时间限制**：30秒
- **教学目标**：在大基数下计算百分比并处理废料
- **计算示例**：80 格 × 25% = 20 格（废料已包含在总格数中）

## 🎯 游戏玩法

### 基本操作

1. **选择关卡**：游戏开始时选择 Level A、B 或 C
2. **查看任务**：
   - 顶部显示：`目標：X% | 總容量：Y 格`
   - 右侧面板显示当前已选格数
3. **填充格子**：
   - **点击方式**：点击格子进行选择/取消选择（蓝色 = 已选，灰色 = 未选）
   - **滑杆方式**：使用右侧滑杆快速调整填充数量
   - **双向同步**：点击和滑杆会实时同步
4. **计算验证**：
   - 学生需要手动计算：`总格数 × 目标百分比 = 需要填充的格数`
   - 注意：废料格子（红色）已包含在总格数中，但不可选择
5. **执行任务**：点击"執行"按钮提交答案
6. **查看反馈**：
   - **成功**：显示成功提示，2秒后自动进入下一关
   - **失败**：显示引导性提示，帮助学生理解错误，可点击"重試"重新挑战当前关卡

### 游戏界面说明

- **顶部**：显示目标百分比和总容量
- **中央**：网格系统，显示所有格子
  - 蓝色格子：已选择的格子
  - 灰色格子：未选择的格子
  - 红色格子：废料格子（锁定，不可选择）
- **右侧控制面板**：
  - 当前储气槽容量
  - 已填格数统计
  - 填充数量滑杆
  - 执行按钮（永久显示在底部）

## 🛠️ 技术栈

- **React 18** - UI 框架
- **Vite 5** - 构建工具和开发服务器
- **Tailwind CSS** - 样式框架
- **Framer Motion** - 动画库
- **Lucide React** - 图标库
- **GitHub Pages** - 部署平台

## 📁 项目结构

```
Gaming_primary/
├── src/
│   ├── components/          # React 组件
│   │   ├── GridSystem.jsx   # 网格系统（核心游戏逻辑）
│   │   ├── ControlPanel.jsx # 右侧控制面板
│   │   ├── FeedbackModal.jsx # 成功/失败反馈弹窗
│   │   ├── CountdownBar.jsx # 倒计时条
│   │   ├── LevelSelector.jsx # 关卡选择器
│   │   └── TopBar.jsx       # 顶部状态栏
│   ├── config/
│   │   └── levels.js        # 关卡配置文件
│   ├── hooks/
│   │   ├── useGameState.js  # 游戏状态管理（核心逻辑）
│   │   └── useLocalStorage.js # 本地存储
│   ├── App.jsx              # 主应用组件
│   └── main.jsx             # 应用入口
├── index.html               # HTML 模板
├── vite.config.js           # Vite 配置
├── tailwind.config.js       # Tailwind 配置
├── package.json             # 项目依赖和脚本
└── README.md                # 项目说明文档
```

## 🌐 部署说明

### GitHub Pages 部署

项目已配置自动部署到 GitHub Pages：

1. **自动部署**：推送到 `main` 分支后，GitHub Actions 会自动构建并部署
2. **手动部署**：
   ```bash
   npm run deploy
   ```
   这会执行 `npm run build` 并将 `dist` 文件夹部署到 `gh-pages` 分支

3. **访问地址**：
   ```
   https://514ctdawn.github.io/Star-Greenhouse-100-Survival/
   ```

### 部署配置

- **Base Path**：`/Star-Greenhouse-100-Survival/`（在 `vite.config.js` 中配置）
- **构建输出**：`dist/` 文件夹
- **部署分支**：`gh-pages`

## 📝 重要注意事项

### ⚠️ 不能直接打开 HTML 文件

**错误做法**：直接双击 `index.html` 文件

**原因**：
- 浏览器使用 `file://` 协议
- 浏览器安全策略会阻止加载 ES6 模块
- 会出现 CORS 错误

**正确做法**：
- ✅ 使用 GitHub Pages 在线访问
- ✅ 使用本地开发服务器（`npm run dev`）
- ✅ 使用预览服务器（`npm run preview`）

### 🔧 开发环境要求

- **Node.js**：v16 或更高版本
- **npm**：v7 或更高版本
- **浏览器**：Chrome、Edge、Firefox、Safari（现代浏览器）

## 🎨 UI/UX 设计理念

- **科幻风格**：深色背景（#0f172a），霓虹边框，营造太空实验室氛围
- **信息层次**：清晰的信息架构，重要信息突出显示
- **交互反馈**：按钮悬停效果、格子选择动画、成功/失败视觉反馈
- **教育友好**：简洁界面，避免干扰，专注于计算任务

## 🔍 游戏逻辑说明

### 胜负判定逻辑

游戏使用精确的格子数量进行判定，避免浮点数误差：

```javascript
const requiredCells = Math.round((totalCells * targetPercentage) / 100);
const actualCells = filledCount + wasteCount;
const isCorrect = actualCells === requiredCells;
```

- **成功条件**：已选格子数 + 废料格子数 = 目标格子数
- **失败反馈**：提供引导性提示，不直接给出答案

### 关卡进阶逻辑

- 完成 Level A → 自动进入 Level B
- 完成 Level B → 自动进入 Level C
- 完成 Level C → 显示完成提示
- 失败 → 可重试当前关卡

## 📄 许可证

MIT License

## 👨‍💻 作者

514ctdawn

## 🙏 致谢

感谢所有为教育游戏化做出贡献的教育工作者和开发者。

---

**教育使命**：通过游戏化学习，帮助学生真正理解百分比是相对于总量的比例，培养扎实的数学计算能力。

## 🛠️ 技术栈

- **React** (Vite)
- **Tailwind CSS**
- **Framer Motion** (动画)
- **Lucide React** (图标)

## 📁 项目结构

```
src/
├── components/          # React 组件
│   ├── GridSystem.jsx   # 网格系统
│   ├── ControlPanel.jsx # 控制面板
│   ├── FeedbackModal.jsx # 反馈弹窗
│   ├── CountdownBar.jsx # 倒计时条
│   └── ...
├── config/
│   └── levels.js       # 关卡配置
├── hooks/
│   ├── useGameState.js # 游戏状态管理
│   └── useLocalStorage.js # 本地存储
└── App.jsx             # 主应用组件
```

## 🌐 GitHub Pages 部署

项目已推送到 GitHub，可以通过以下方式部署到 GitHub Pages：

1. 在 GitHub 仓库设置中启用 GitHub Pages
2. 选择 `main` 分支和 `/dist` 目录
3. 访问：`https://514ctdawn.github.io/Star-Greenhouse-100-Survival/`

## 📝 注意事项

- ⚠️ **不能直接打开 HTML 文件**：由于浏览器安全策略，必须使用本地服务器运行
- 使用 `start-game.bat` 是最简单的启动方式
- 确保已安装 Node.js 和 npm

## 📄 许可证

MIT License

## 👨‍💻 作者

514ctdawn

---

**教育目标**：通过游戏化学习，帮助学生理解百分比是相对于总量的比例，而不是固定的数值。
